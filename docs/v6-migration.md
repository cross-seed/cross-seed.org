---
id: v6-migration
title: v6 Migration Guide
position: 0
---

### Updates Since Initial Release

-   After discussions with Bobokun (qbitmanage) and several users familiar with qBittorrent behavior and best-practices, we've done some major overhauling of `cross-seed` and introduced several new breaking changes to implement everything we could for all clients.

    These changes are documented here, but are not published as of yet, and therefore we still recommend holding off updating to v6 for most users using qBittorrent.

    :::caution BE ADVISED
    The entire migration guide and relevant options referenced here should all be re-read again, as there have been significant changes made.

    Please note: if you have time to test and report anything, know that you can update at your own risk.

    **Make sure you have made a backup of your configuration folder prior to running v6 for the first time.**
    :::

    Updated 4/21/24 18:00 GMT -6

-   ~~qBittorrent users should stick with v5.9.2 for the time being if you use Auto Torrent Management in **ANY** capacity.~~

    Updated: 4/21/24 @ 10:40 GMT -6

-   [autobrr addition](#autobrr-update) and [linking section update](#linking-updates)

    Updated: 4/21/24 @ 09:25 GMT -6

## Overview

There are several changes in `cross-seed` version 6.x. Most of them do not require any action on your part, but some need to be addressed in both the configuration file ([`config.js`](https://raw.githubusercontent.com/cross-seed/cross-seed/master/src/config.template.cjs)) and potentially permissions or volumes/mounts.

This document outlines the changes made and the actions required to take advantage of all the new features and capabilities.

:::danger Please Note
**This is currently a pre-release of v6.** Your mileage _may vary_ on behavior and performance. We **always** recommend that before updating you make a backup of your **entire** configuration directory.

Please let us know if you run into any issues [**via Discord**](https://discord.gg/jpbUFzS5Wb)
:::

### Breaking Changes (TLDR)

| Scope or Area              | Description                                                                                                                                                                                                                                                                                              |
| -------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| qBittorrent (experimental) | Confirmation/Testing of changes are currently ongoing. Please be aware that if you are on qBittorrent and wanting to test v6 **ALWAYS MAKE A BACKUP OF YOUR CONFIG DIRECTORY**                                                                                                                           |
| API authentication         | [`apiAuth`](./basics/options.md#apiauth) option was removed and the optional [`apiKey`](./basics/options.md#apikey) option was added. If unspecified, cross-seed will use an autogenerated API key. Use the API key when you make calls to the `/api/webhook` endpoint and the `/api/announce` endpoint. |
| Node                       | Minimum required version: v20                                                                                                                                                                                                                                                                            |

:::caution HEADS-UP!
`cross-seed` v6 requires Node 20 or greater. Check your Node version with `node --version` and update if needed.

**Docker users can skip this step.**
:::

:::tip
You can grab the new [`config.template.js`](https://raw.githubusercontent.com/cross-seed/cross-seed/master/src/config.template.cjs) and simply go through and migrate your missing options over to your current `config.js`. Alternatively, you can add them yourself by referencing our documentation.

-   [`dataCategory -> linkCategory`](./basics/options.md#linkcategory)

-   [`apiAuth -> apiKey`](./basics/options.md#apikey)

-   [`flatLinking`](./basics/options.md#flatlinking)

-   [`blockList`](./basics/options.md#blocklist)

:::

### Stricter `config.js` Validation

One of the biggest changes made in v6 is better config validation and error messaging. Each option in the config file is validated for formatting and proper syntax. If either is incorrect, a detailed error message will tell you where and how to fix each option.

The new error messages will also provide links to specific documentation for the option and point out bad paths or permission errors if you have any.

This is not going to automatically fix anything for you but will give you a better starting point to try and solve the issue yourself before requiring outside assistance.

### Linking Updates

We have made drastic changes to the way linking operates, both in its implementation and in expanding its capabilities. Not only is linking more versatile in what can be matched now (for instance, previously, files inside/outside a folder would not match to a torrent in the opposite folder structure - this has been fixed), but you can also take advantage of linking when searching .torrent files instead of solely applying to data-based matching.

To achieve torrent linking, you simply have to mount or give permission (if necessary) for `cross-seed` to read and write to the actual torrent data structure (downloaded files) your client uses. This will need to mirror (for docker) the mounts made in the client. Your client will also need to be able to read and write to the [`linkDir`](./basics/options.md#linkdir) folder. You do not need to specify a [`dataDirs`](./basics/options.md#datadirs) in your conig for this setup, but simply define a [`linkDir`](./basics/options.md#linkdir).

:::tip
You can still include a [`dataDirs`](./basics/options.md#datadirs) if you wish to also index and search your data, but [`dataDirs`](./basics/options.md#datadirs) isnt necessary to utilize linking behavior now.
:::

The new default linking structure in v6 in your [`linkDir`](./basics/options.md#linkdir) creates sub-folders for each indexer (for example, `/link_dir/Indexer 1/Name.of.Torrent.File.mkv`). This doesn't change or affect previously matched torrents, but if enabled will follow this new structure. Your `Indexer 1` will be the name of the indexer in Prowlarr/Jackett or [autobrr](#autobrr-update).

:::warning BE ADVISED
Auto Torrent Management in qBittorrent has presented some hurdles with implementing the new linking enhancements with qBittorrent.

**Please read the next part of this section carefully to determine what settings you will require to achieve the best results.**

During this transitional process, you can get support [**via Discord**](https://discord.gg/jpbUFzS5Wb) if you require assistance with any of the configurations.
:::

#### qBittorrent

Due to the limitations in place with qBittorrent and Auto Torrent Management, we've introduced a new option to support of the feature-sets we have added.

If you are using Auto Torrent Management (AutoTMM) **in any capacity, we strongly recommend** that you enable [`flatLinking`](./basics/options.md#flatlinking) to acheive the matching and linking behavior we've added to v6. You will still be able to take advantage of the [matching enhancements](#partial-matching) in v6 with your searches.

`cross-seed` will inject all linked torrents directly to the [`linkCategory`](./basics/options.md#linkcategory) if linking is possible, otherwise direct torrent matches will behave the same as they did in v5.

### autobrr Update

If you're using [`flatLinking: false`](./basics/options.md#flatlinking), when receiving announces with the old data payload in your cross-seed autobrr filter, you might notice inconsistencies in the folders created from ones created with a search.

To address this, [autobrr's macros and documentation have been updated](https://autobrr.com/3rd-party-tools#cross-seed-filter). There is now a new macro to accommodate the new linking structure. By updating your data payload with the provided code, autobrr will now send the indexer's name from `Settings -> Indexers` instead of the "indexer identifier".

```json
{
    "name": "{{ .TorrentName }}",
    "guid": "{{ .TorrentUrl }}",
    "link": "{{ .TorrentUrl }}",
    "tracker": "{{ .IndexerName | js}}"
}
```

Simply ensure that you've update your data and the indexer's name in autobrr matches the one in Prowlarr/Jackett, and everything will align correctly in your [`linkDir`](./basics/options.md#linkdir).

### Updated [`torrentDir`](./basics/options.md#torrentdir) Option

Previously, our recommendation if you wanted to strictly search only [`dataDirs`](./basics/options.md#datadirs) for matches was to point [`torrentDir`](./basics/options.md#torrentdir) at an empty folder. This is no longer necessary. You can now set [`torrentDir`](./basics/options.md#torrentdir) to `null` to achieve a data-only search.

### New [`blockList`](./basics/options.md#blocklist) Option

Another new option added is called [`blockList`](./basics/options.md#blocklist). This option takes an array of strings (`["example", "example2"]`) and will block any matching strings contained in both the release name as well as _exact_ matches.

You can include strings for the full, exact name of a torrent or file (e.g., `"The.Best.Movie.Ever.2024.DV.HDR.Atmos.mkv"`), partial name/keywords (e.g., `best.movie.ever`), or the infoHash from a torrent you wish to block.

### [`apiAuth`](./basics/options.md#apiauth) (removed) and [`apiKey`](./basics/options.md#apikey) (added) Options

`cross-seed` endpoints (announce and webhook) now _require_ API authentication. There are two ways to set up API authentication in v6:

1. Generated Key: By setting [`apiKey`](./basics/options.md#apikey) to `undefined`, `cross-seed` will continue to use a generated key. You can find this key by running `cross-seed api-key`.

    **This is recommended for most users.**

2. Designated Key: You can now set a designated API key for `cross-seed`. Setting [`apiKey: "YOURkeyHereMak3It@good1",`](./basics/options.md#apikey) in the config file will tell `cross-seed` to always use that key.

The `apiAuth` option in previous versions of `cross-seed` has been removed.

:::warning
While we provide this option, we strongly urge you to use a generated key. If you are specifying a key, please make sure this is a secure and safe key. You are responsible for your security.
:::

### Searching Improvements

:::caution
Currently, only Movies, TV Series, and Anime are officially supported.
:::

#### Anime Support (experimental)

Anime is now supported in a **_somewhat limited_** capacity. Please note that this is our first attempt at accommodating this content, so your experience may vary depending on your indexers and content.

We've aimed to cover the inconsistent and unconventional naming conventions that prevail in anime content, but there may be certain naming styles, from specific groups or indexers, that we haven't accounted for.

:::caution HELP
If you come across any anime naming schemes (**not _ONE_ "edge-case" release**) that we've missed, please let us know [**via Discord**](https://discord.gg/jpbUFzS5Wb).
:::

#### Torznab Categories

`cross-seed` will now check with Prowlarr or Jackett for the categories that the indexer supports. As a result, we no longer send searches for content that is not listed by Prowlarr/Jackett as available on the indexer.

This should reduce the number of searches made for content that does not have a chance of existing on the indexer.

:::info Note
This requires no additional action to be taken on your part.
:::

### Partial Matching

We've introduced a new mode for [`matchMode`](./basics/options#matchmode) named `partial`.

This mode is similar to `risky` but doesn't necessitate all files to be present. The minimum required "match size" is determined by `1 - fuzzySizeThreshold`. For instance, with a `fuzzySizeThreshold` of `0.05`, potential cross-seeds containing only 95% of the original size will match. This mode is designed to identify cross-seeds missing small files such as nfo, srt, or sample files.

:::tip
Torrents added via `partial` matchMode will always behave as if [`skipRecheck`](./basics/options.md#skiprecheck) is `false`. It's advised not to set [`fuzzySizeThreshold`](./basics/options#fuzzysizethreshold) above `0.1` to avoid [triggering excessive snatches](./basics/faq-troubleshooting.md#my-tracker-is-mad-at-me-for-snatching-too-many-torrent-files), **which could lead to the banning or disabling of your account on your trackers.**
:::

### Other Miscellaneous Changes

Here is a short list of other changes made in v6. These are all behind-the-scenes updates made to improve `cross-seed`.

-   Updated to Node v20, ES2022, and TypeScript v5
-   Any indexer failures not related to rate limiting (status code: `429`) will be cleared from the database when `cross-seed` is restarted.
-   Regex improvements. Some trackers rename search results or have non-standard naming conventions. The updated regex takes more of those into account and should find more matches.
-   Improved logging messages, specifically around matching decisions.
-   There are now lists of files/folders integrated into `cross-seed` that are blocked during prefiltering at startup. These include folders present inside full-disc Bluray/DVD releases (BDMV/CERTIFICATE), individual music files, RAR archives, and season folders (e.g. "Season 01") in Sonarr libraries. Excluding these from the `cross-seed` index (for data-based searches) will result in fewer "bad" searches that would otherwise yield no viable results.
-   New recommended defaults in [`config.template.js`](https://raw.githubusercontent.com/cross-seed/cross-seed/master/src/config.template.cjs). These settings are what we consider to be the best starting options when setting up `cross-seed`.
